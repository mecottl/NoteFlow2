<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Editor de nota - Cybernet</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- CSS adicional (scrollbar, sombras, tab-size) -->
  <link rel="stylesheet" href="/css/note.css">
</head>
<body class="bg-gray-950 text-gray-100 font-mono min-h-screen flex flex-col relative overflow-hidden">
  <!-- Fondo sutil -->
  <div class="absolute inset-0 opacity-[0.03] bg-[url('/placeholder.svg?height=100&width=100')] bg-[length:50px_50px] -z-10"></div>

  <header class="p-4 border-b-2 border-purple-800 shadow-lg shadow-purple-900/30 relative z-10">
    <div class="container mx-auto flex items-center justify-between">
      <a href="/notes" class="text-purple-400 hover:text-purple-300 flex items-center gap-2 text-lg">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" class="lucide lucide-arrow-left">
          <path d="m12 19-7-7 7-7"/><path d="M19 12H5"/>
        </svg>
        Volver a Notas
      </a>
      <h1 id="pageTitle" class="text-2xl font-bold text-purple-400"></h1>
      <div class="w-20"></div>
    </div>
  </header>

  <main class="container mx-auto flex-1 p-8 flex flex-col gap-6 relative z-10">
    <div id="status" class="text-sm text-gray-400"></div>

    <!-- Título -->
    <input
      id="noteTitle"
      type="text"
      class="w-full bg-gray-900 border-2 border-purple-800 rounded-lg p-4 text-3xl font-bold text-purple-300 placeholder-purple-500/50 focus:outline-none focus:ring-2 focus:ring-purple-600 input-glow"
      placeholder="Título de la nota AI..."
      aria-label="Título de la nota"
    />

    <!-- Editor con overlay (altura fija + scroll interno) -->
    <div class="relative w-full bg-gray-900 border-2 border-purple-800 rounded-lg h-[70vh]">
      <!-- Capa fantasma -->
      <div id="ghost"
           class="absolute inset-0 p-6 pointer-events-none overflow-hidden opacity-65 text-slate-400 whitespace-pre-wrap break-words
                  font-sans text-[20px] leading-[1.6] tracking-normal tab-2">
      </div>

      <!-- Capa editable -->
      <textarea id="editor"
        class="relative w-full h-full bg-transparent text-gray-200 p-6 border-0 resize-none outline-none overflow-auto
               focus:ring-2 focus:ring-purple-600 editor-scroll font-sans text-[20px] leading-[1.6] tracking-normal
               whitespace-pre-wrap break-words tab-2"
        placeholder="Escribe tu nota aquí... La IA te sugiere en gris y puedes aceptar con TAB."
        aria-label="Contenido de la nota"></textarea>
    </div>

    <div class="flex flex-col sm:flex-row gap-4 justify-end">
      <button id="deleteBtn"
        class="px-8 py-4 bg-red-700 text-white rounded-full shadow-lg hover:bg-red-600 transition-all duration-300 transform hover:scale-105 text-lg">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" class="lucide lucide-trash-2 inline-block mr-2">
          <path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/>
        </svg>
        Eliminar Nota
      </button>

      <button id="saveBtn"
        class="px-8 py-4 bg-purple-700 text-white rounded-full shadow-lg btn-glow flex items-center justify-center gap-3 text-lg">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" class="lucide lucide-save">
          <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/>
        </svg>
        Guardar Cambios
      </button>
    </div>
  </main>

  <footer class="p-6 text-center text-gray-500 text-sm border-t-2 border-purple-800 shadow-inner shadow-purple-900/30 relative z-10">
    &copy; 2025 CYBERNET AI. All rights reserved.
  </footer>

  <script src="/js/note.js" defer></script>
</body>
</html>
